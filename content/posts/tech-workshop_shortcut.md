---
title: "勉強会[帰宅時のルーティンを効率化する]"
date: 2018-11-16T15:19:20+09:00
tags: ["勉強会", "会社紹介", "iOS", "ショートカット"]
categories: ["里井 嘉真(yoshi-sato)"]

---

<br>

皆さんこんにちは。

今日で齢23の里井です。

今週もテクテクの勉強会の様子をお送りいたします。

よろしくお願いします。

<br>
※技術的なブログについてはQiitaでメンバーが各々に書き進めています。

こちらもぜひご覧ください。

<br>
[Qiita - パーソルプロセス&テクノロジー](https://qiita.com/organizations/persol-pt)

<br>

今週は、我らがテクテク部のマネージャー[川崎さん](https://persol-pt.github.io/categories/%E5%B7%9D%E5%B4%8E-%E5%8D%93%E6%BA%80/)のプレゼンで、

発表テーマは「帰宅時のルーティンを効率化する」でした。  

<br>

<br>

---

## 帰宅時のルーティンを効率化する

 みなさんはこんなことはないでしょうか？  

仕事が終わり、家に帰るときに「今から帰るよー」とメールをしなければならない。  

しかし、日中一生懸命働くあまり疲れてメールなんか打ちたくないし何も考えたくない   

そんな毎日のルーティンを省力化する手段として、iOSで利用できる「ショートカット」を使ってみてはどうでしょう？  

ちなみに私はApple製品を持っていないので、iPhoneのスタイリッシュさに当てられ失神しそうになりながら発表を聴いていました。そう。iPhoneならね。

<br>

<br>



## ショートカットとは？

ショートカットとは、iOS 12の配信に合わせて登場したアプリで、iOS端末ではApp Storeからインストールすることが出来ます。  

iOSの標準機能やサードパーティアプリの操作をあらかじめプログラミングしておき、一連の動作をショートカットとしてまとめて実行できるというものです。  

ショートカットで出来るアクションには、iOSの基本機能で出来ること、ダウンロードしたアプリ、基本的な制御文を使ったスクリプト実行があります。

作成したショートカットは、ウィジェットとしてホーム画面に登録するほかに、Siriで実行可能なアクション登録することで「ヘーイシリ、うんちゃらーかんちゃらー」とか出来ます。ほとんどマジック。

また、作ったショートカットをiCloudで共有し、他の端末で利用することも出来ます。

以下はショートカットを作成する際に選べるアクションの一覧です。

{{< figure src="/images/tech-workshop/20181106/10.JPG" title="" >}}

{{< figure src="/images/tech-workshop/20181106/11.JPG" title="" >}}

{{< figure src="/images/tech-workshop/20181106/12.JPG" title="" >}}

{{< figure src="/images/tech-workshop/20181106/13.JPG" title="" >}}

{{< figure src="/images/tech-workshop/20181106/14.JPG" title="" >}}

{{< figure src="/images/tech-workshop/20181106/15.JPG" title="" >}}

{{< figure src="/images/tech-workshop/20181106/16.JPG" title="" >}}

これだけ見てもショートカットで出来ることの幅広さが伺えます。

<br>

<br>

## はじめかた

まずはiPhoneとかのiOS端末を用意します。  

標準ではインストールされていないので、iOS 12にアップデートしてからAppStoreよりショートカットをインストールします。

{{< figure src="/images/tech-workshop/20181106/18.JPG" title="" >}}

ショートカットを作成をタップします。作成したショートカットはライブラリと呼ばれる場所に登録されていくそうです。  

{{< figure src="/images/tech-workshop/20181106/19.JPG" title="" >}}

1からショートカットを作成することも出来ますが、Appleがサンプルを用意しており、最初はこれらを雛形として修正するとやりやすいそうです。

{{< figure src="/images/tech-workshop/20181106/20.JPG" title="" >}}

アクションリストからアクションと呼ばれる処理を選択し、ショートカットを組み立てていくようです。

{{< figure src="/images/tech-workshop/20181106/21.JPG" title="" >}}

<br>

<br>



## 帰るメールショートカットの作成

最初のテーマに戻ります。  

仕事終わりにご家族に帰宅しますメールを送る川崎さんは、これを自動化するショートカットを作成します。

毎回同じ文面だと味気ないので、微妙な表記ゆれでメールに温かみを加えるという受け取る側の配慮も欠かさない川崎さんです。

さすがは我々の上司と言わざるを得ません。

{{< figure src="/images/tech-workshop/20181106/23.JPG" title="" >}}

これでご家族の方も安心ですね。

帰宅時間から黒色な感が醸し出されているようにも見えますが、私は毎日定時帰りなので恐らく飲み会終わりとかなのでしょう。

酔っ払っていても分単位で帰宅予定時間を報告できるので、予想外に泥酔してしまっても大丈夫です。

文面を生成し、LINEで自動的にメッセージを送信するショートカットを作成したかったそうですが、LNEアプリ側が対応しておらず、代替案として自動生成したメッセージをクリップボードにコピーした状態でLINEアプリを自動的に開き、ペースト→送信の2アクションで送信できる状態に持っていくものにしたのだそうです。

{{< figure src="/images/tech-workshop/20181106/24.JPG" title="" >}}

帰宅予定時間については、現在地から自宅までの移動時間をマップアプリで取得し、現在の時刻から計算した上で文面に組み込んでいるようです。

{{< figure src="/images/tech-workshop/20181106/25.JPG" title="" >}}

人の温かみを感じさせる表記揺れに関しては、乱数生成とif/else文で分岐させて文章を決定しています。

{{< figure src="/images/tech-workshop/20181106/26.JPG" title="" >}}

現時点ではLINEアプリ側がショートカットに完全には対応しておらず、特定ユーザーとのトークルームを起動するところまでしか実現できないそうです。

メッセージをLINEで送信する部分に関しては、生成した文面をクリップボードにコピーした上で、LINEの会話画面を開く実装になっています。

{{< figure src="/images/tech-workshop/20181106/27.JPG" title="" >}}

<br>

<br>



## ついでに作ってみたショートカット

話は変わりますがテクテク部のSlackチームには、セルジオ越後2というアイドル？的ボットがいます。

ちなみに1はCloudFunctionsの海にのまれました。

私が~~犯人です~~作りました。

Slack上の会話に対してDialogFlowを利用して適切と思われる文章を返す超絶ハイテクノロジーを搭載し、

文脈に関わらずほぼすべての会話にニュージーランドのサッカーチームを罵倒するという場違い極まりない形で口を挟みます。

あとなんか時々詩人になります。

チームの皆様におかれましては毎度お騒がせしております。

そんなセルジオ越後2の発言を拾い、いつでもどこでも彼の発言を確認できる~~謎~~ショートカットを作ってくださりました。ウレシイ。

{{< figure src="/images/tech-workshop/20181106/31.JPG" title="" >}}

実現方法としては、ショートカットが実行されたタイミングでSlackのメッセージ検索用APIをコールし、セルジオの発言の直近1件をJSON形式で取得、パースしていい感じに発言内容をSiriにしゃべらせるという形です。

- HeySiri、セルジオなんて言ってる？
- 「ニュージーランドはクロスバーの上を通せば得点とラグビー文化だからそう思っているのかもね。」って言ってましたよ。

{{< figure src="/images/tech-workshop/20181106/32.JPG" title="" >}}

ショートカットでAPI呼び出しも出来るというのは正直驚きでした。

SSH接続もできるそうなので、パスワードだけで入れるサーバーであれば接続できます。

{{< figure src="/images/tech-workshop/20181106/33.JPG" title="" >}}

{{< figure src="/images/tech-workshop/20181106/34.JPG" title="" >}}

{{< figure src="/images/tech-workshop/20181106/35.JPG" title="" >}}

{{< figure src="/images/tech-workshop/20181106/36.JPG" title="" >}}

## 感想

最後に、川崎さんがショートカットに触れてみた感想です。

{{< figure src="/images/tech-workshop/20181106/37.JPG" title="" >}}



川崎さんの感想にもあるように、すべてiPhoneの画面上で操作しなければいけないというのはあまり眼球に優しくないと感じました。

そのうちMacPC上でも作成できるようにして欲しいと思います。

iPhoneを持っていないので残念ながらショートカットを自分で試すことはできないのですが、

似たようなツールとして、MicrosoftもFlowというタスク自動化ツールを提供しているようなので、こちらも調べてみたいと思いました。  

<br>

川崎さん、ありがとうございました！！

<br>

